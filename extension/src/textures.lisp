(in-package #:pyx.extension)

(pyx:define-asset-pool textures (:base "data/textures")
  (brdf-lut "brdf-lut.png")
  (debug "debug.png")
  (font "font.png"))

(pyx:define-asset-pool environments (:base "data/textures/environments")
  (papermill-diffuse-back "papermill-ldr-diffuse-back.png")
  (papermill-diffuse-bottom "papermill-ldr-diffuse-bottom.png")
  (papermill-diffuse-front "papermill-ldr-diffuse-front.png")
  (papermill-diffuse-left "papermill-ldr-diffuse-left.png")
  (papermill-diffuse-right "papermill-ldr-diffuse-right.png")
  (papermill-diffuse-top "papermill-ldr-diffuse-top.png")
  (papermill-specular-back "papermill-ldr-specular-back.png")
  (papermill-specular-bottom "papermill-ldr-specular-bottom.png")
  (papermill-specular-front "papermill-ldr-specular-front.png")
  (papermill-specular-left "papermill-ldr-specular-left.png")
  (papermill-specular-right "papermill-ldr-specular-right.png")
  (papermill-specular-top "papermill-ldr-specular-top.png")
  (sky-back "sky-back.png")
  (sky-bottom "sky-bottom.png")
  (sky-front "sky-front.png")
  (sky-left "sky-left.png")
  (sky-right "sky-left.png")
  (sky-top "sky-top.png"))

(pyx:define-texture debug ()
  (:source (textures debug)))

(pyx:define-texture brdf-lut ()
  (:source (textures brdf-lut)))

(pyx:define-texture font ()
  (:source (textures font)))

(pyx:define-texture papermill-diffuse (:cube-map)
  (:source (:x+ (environments papermill-diffuse-right)
            :x- (environments papermill-diffuse-left)
            :y+ (environments papermill-diffuse-bottom)
            :y- (environments papermill-diffuse-top)
            :z+ (environments papermill-diffuse-front)
            :z- (environments papermill-diffuse-back))))

(pyx:define-texture papermill-specular (:cube-map)
  (:min-filter :linear-mipmap-linear
   :source (:x+ (environments papermill-specular-right)
            :x- (environments papermill-specular-left)
            :y+ (environments papermill-specular-bottom)
            :y- (environments papermill-specular-top)
            :z+ (environments papermill-specular-front)
            :z- (environments papermill-specular-back))))

(pyx:define-texture sky (:cube-map)
  (:source (:x+ (environments sky-right)
            :x- (environments sky-left)
            :y+ (environments sky-bottom)
            :y- (environments sky-top)
            :z+ (environments sky-front)
            :z- (environments sky-back))))
